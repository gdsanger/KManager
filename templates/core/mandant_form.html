{% extends "base.html" %}

{% block title %}{{ title }} - Domus{% endblock %}

{% block content %}
<div class="container-fluid mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="bi bi-building"></i> {{ title }}</h2>
        <a href="{% url 'mandant_list' %}" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Zur√ºck zur Liste
        </a>
    </div>

    {% if messages %}
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
    {% endif %}

    <div class="row">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="bi bi-file-earmark-text"></i> {{ title }}
                    </h5>
                </div>
                <div class="card-body">
                    <form method="post" novalidate>
                        {% csrf_token %}
                        
                        <!-- Basisdaten -->
                        <h6 class="text-uppercase text-muted mb-3"><i class="bi bi-info-circle"></i> Basisdaten</h6>
                        <div class="row mb-3">
                            <div class="col-md-12">
                                <label for="{{ form.name.id_for_label }}" class="form-label">{{ form.name.label }}</label>
                                {{ form.name }}
                                {% if form.name.errors %}
                                    <div class="text-danger small">{{ form.name.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-12">
                                <label for="{{ form.adresse.id_for_label }}" class="form-label">{{ form.adresse.label }}</label>
                                {{ form.adresse }}
                                {% if form.adresse.errors %}
                                    <div class="text-danger small">{{ form.adresse.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="{{ form.plz.id_for_label }}" class="form-label">{{ form.plz.label }}</label>
                                {{ form.plz }}
                                {% if form.plz.errors %}
                                    <div class="text-danger small">{{ form.plz.errors }}</div>
                                {% endif %}
                            </div>
                            <div class="col-md-8">
                                <label for="{{ form.ort.id_for_label }}" class="form-label">{{ form.ort.label }}</label>
                                {{ form.ort }}
                                {% if form.ort.errors %}
                                    <div class="text-danger small">{{ form.ort.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-12">
                                <label for="{{ form.land.id_for_label }}" class="form-label">{{ form.land.label }}</label>
                                {{ form.land }}
                                {% if form.land.errors %}
                                    <div class="text-danger small">{{ form.land.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <hr class="my-4">

                        <!-- Kontakt -->
                        <h6 class="text-uppercase text-muted mb-3"><i class="bi bi-telephone"></i> Kontakt</h6>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="{{ form.telefon.id_for_label }}" class="form-label">{{ form.telefon.label }}</label>
                                {{ form.telefon }}
                                {% if form.telefon.errors %}
                                    <div class="text-danger small">{{ form.telefon.errors }}</div>
                                {% endif %}
                            </div>
                            <div class="col-md-6">
                                <label for="{{ form.fax.id_for_label }}" class="form-label">{{ form.fax.label }}</label>
                                {{ form.fax }}
                                {% if form.fax.errors %}
                                    <div class="text-danger small">{{ form.fax.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="{{ form.email.id_for_label }}" class="form-label">{{ form.email.label }}</label>
                                {{ form.email }}
                                {% if form.email.errors %}
                                    <div class="text-danger small">{{ form.email.errors }}</div>
                                {% endif %}
                            </div>
                            <div class="col-md-6">
                                <label for="{{ form.internet.id_for_label }}" class="form-label">{{ form.internet.label }}</label>
                                {{ form.internet }}
                                {% if form.internet.errors %}
                                    <div class="text-danger small">{{ form.internet.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <hr class="my-4">

                        <!-- Rechtliches -->
                        <h6 class="text-uppercase text-muted mb-3"><i class="bi bi-bank"></i> Rechtliches</h6>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="{{ form.steuernummer.id_for_label }}" class="form-label">{{ form.steuernummer.label }}</label>
                                {{ form.steuernummer }}
                                {% if form.steuernummer.errors %}
                                    <div class="text-danger small">{{ form.steuernummer.errors }}</div>
                                {% endif %}
                            </div>
                            <div class="col-md-6">
                                <label for="{{ form.ust_id_nr.id_for_label }}" class="form-label">{{ form.ust_id_nr.label }}</label>
                                {{ form.ust_id_nr }}
                                {% if form.ust_id_nr.errors %}
                                    <div class="text-danger small">{{ form.ust_id_nr.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-12">
                                <label for="{{ form.geschaeftsfuehrer.id_for_label }}" class="form-label">{{ form.geschaeftsfuehrer.label }}</label>
                                {{ form.geschaeftsfuehrer }}
                                {% if form.geschaeftsfuehrer.errors %}
                                    <div class="text-danger small">{{ form.geschaeftsfuehrer.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-12">
                                <label for="{{ form.kreditinstitut.id_for_label }}" class="form-label">{{ form.kreditinstitut.label }}</label>
                                {{ form.kreditinstitut }}
                                {% if form.kreditinstitut.errors %}
                                    <div class="text-danger small">{{ form.kreditinstitut.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-8">
                                <label for="{{ form.iban.id_for_label }}" class="form-label">{{ form.iban.label }}</label>
                                {{ form.iban }}
                                {% if form.iban.errors %}
                                    <div class="text-danger small">{{ form.iban.errors }}</div>
                                {% endif %}
                            </div>
                            <div class="col-md-4">
                                <label for="{{ form.bic.id_for_label }}" class="form-label">{{ form.bic.label }}</label>
                                {{ form.bic }}
                                {% if form.bic.errors %}
                                    <div class="text-danger small">{{ form.bic.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-12">
                                <label for="{{ form.kontoinhaber.id_for_label }}" class="form-label">{{ form.kontoinhaber.label }}</label>
                                {{ form.kontoinhaber }}
                                {% if form.kontoinhaber.errors %}
                                    <div class="text-danger small">{{ form.kontoinhaber.errors }}</div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="d-flex justify-content-between mt-4">
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-save"></i> {{ action }}
                            </button>
                            <a href="{% url 'mandant_list' %}" class="btn btn-secondary">
                                <i class="bi bi-x-circle"></i> Abbrechen
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Sidebar with info -->
        <div class="col-lg-4">
            <div class="card">
                <div class="card-header">
                    <i class="bi bi-info-circle"></i> Hinweise
                </div>
                <div class="card-body">
                    <p class="text-muted small mb-2">
                        <strong>Pflichtfelder:</strong> Name, Adresse, PLZ, Ort und Land sind erforderlich.
                    </p>
                    <p class="text-muted small mb-2">
                        <strong>PLZ:</strong> Maximal 10 Zeichen.
                    </p>
                    <p class="text-muted small mb-0">
                        <strong>IBAN:</strong> International Bank Account Number (max. 34 Zeichen).
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
