{% extends 'base.html' %}

{% block title %}Customer Support Portal - Domus{% endblock %}

{% block content %}
<div class="container-fluid px-0">
    <div class="row">
        <div class="col-12">
            <h1 class="mb-4">
                <i class="bi bi-headset"></i> Customer Support Portal
            </h1>
            
            {% if token_missing %}
                <div class="alert alert-danger" role="alert">
                    <h4 class="alert-heading">
                        <i class="bi bi-exclamation-triangle"></i> Konfigurationsfehler
                    </h4>
                    <p>
                        Das Customer Support Portal kann nicht angezeigt werden, da der <strong>AgiraToken</strong> nicht konfiguriert ist.
                    </p>
                    <hr>
                    <p class="mb-0">
                        Bitte kontaktieren Sie Ihren Systemadministrator, um die Umgebungsvariable <code>AgiraToken</code> zu setzen.
                    </p>
                </div>
            {% else %}
                <iframe 
                    src="https://agira.angermeier.net:8443/embed/projects/3/issues/?token={{ agira_token }}"
                    style="width: 100%; height: 100vh; border: none;"
                    title="Agira Customer Support Portal">
                </iframe>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
